<!-- MarkdownTOC -->

- [Оформление коммита](#%D0%9E%D1%84%D0%BE%D1%80%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D0%B0)
  - [Структурное разделение изменений](#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%BD%D0%BE%D0%B5-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9)
  - [Формат сообщения коммита](#%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D0%B0)
    - [Тип](#%D0%A2%D0%B8%D0%BF)
    - [Область](#%D0%9E%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D1%8C)
    - [Компонент](#comp)    
    - [Описание](#desc)
    - [Основная часть](#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%B0%D1%8F-%D1%87%D0%B0%D1%81%D1%82%D1%8C)
  - [Примеры](#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B)

<!-- /MarkdownTOC -->

Что почитать:
- Работа в Git: https://habrahabr.ru/post/106912/
- О коммитах: https://habrahabr.ru/post/329992/

<a name="%D0%9E%D1%84%D0%BE%D1%80%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D0%B0"></a>
## Оформление коммита

При оформлении коммитов мы следуем некоторым правилам. Следовать им необходимо
для того, чтобы можно было легче следить за *историей проекта*, не заглядывая
в исходный код.

<a name="%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%BD%D0%BE%D0%B5-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9"></a>
### Структурное разделение изменений

Основное правило при создания коммита - создание только *одного логического
изменения* за один коммит.

Основные вещи, которых следует избегать при создании коммита:

 - смешивание форматирования кода с функциональными изменениями;
 - смешивание двух или более несвязанных функциональных изменений кода;
 - отправка больших новых фич в одном гигантском коммите.

При создании коммита следует убедиться, что в нём не содержится
закомментированного отладочного кода или каких-либо файлов, не относящихся
к данному коммиту.

<a name="%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D0%B0"></a>
### Формат сообщения коммита

Каждое сообщение состоит из *заголовка* коммита и *основной части*.
Заголовок имеет специальный формат, который включает в себя *тип*, *область
действия* и краткое *описание* коммита.

```
<тип>(<область>): <компонент> - <описание>
<ПУСТАЯ СТРОКА>
<основная часть>
```

*Заголовок сообщения* обязателен, в то время как основная часть сообщения
может быть пустой (в этом случае также отпадает необходимость в пустой строке).

Ни одна строка сообщения коммита не должна быть длиннее 100 символов!(конечно физически такого ограничения нет, но давай те его соблюдать)
Это необходимо для того, чтобы сообщение можно было без проблем прочитать как
на Gitlab'е, так и в других инструментах для Git.

<a name="%D0%A2%D0%B8%D0%BF"></a>
#### Тип

Должен быть одним из следующих:

 - `feature`: новый функционал для пользователя (не новая фича в системе сборки);
 - `fix`: исправление ошибки для пользователя (не исправление ошибки в скрипте
   сборки);
 - `docs`: изменение документации;
 - `style`: форматирование кода, исправление опечаток и т.д.;
 - `refactor`: изменения кода, которые ни добавляют новый функционал,
   ни исправляют ошибок;
 - `perf`: изменения в коде, улучшающие производительность;
 - `test`: добавление отсутствующих юнит-тестов или исправление имеющихся;
 - `chore`: изменения в системе сборки или вспомогательных утилитах,
   относящихся, например, к генерации документации (то есть, изменения,
   не относящиеся к основному коду приложения).

<a name="%D0%9E%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D1%8C"></a>
#### Область

Область действия может являться любой частью (компонентом) ПО, которую
затрагивает данный коммит. ПО КПА БИВК-МР состоит из следующих частей:
- `funlib` - функциональная библиотека
- `db` - база данных
- `gui` - менеджер тестов
- `tests` - сами тесты
- `tools` - инструменты
- `config` - конфигурационный файл

Можно указать область `all` если изменения касаются проекта в целом

Также возможно перечисление областей через запятую.

<a name="comp"></a>
#### Компонент - опционально
Если изменения касаются какого-то отдельного компонента, стоит его написать, например для функциональной библиотеки или менеджера тестов это может быть класс, для тестов - название теста (имя файла)

<a name="desc"></a>
#### Описание

Описание должно содержать краткую информацию об изменении: что было сделано
и зачем это было сделано.

 - должно начинаться со *строчной* буквы (в нижнем регистре);
 - в конце описания не должно быть точки (.);

При большом количестве информации, которую нужно сообщить человеку, читающему
историю проекта, помещать ей следует в *основную часть* сообщения коммита.

<a name="%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%B0%D1%8F-%D1%87%D0%B0%D1%81%D1%82%D1%8C"></a>
#### Основная часть
Заполнение основной части коммита *опционально*. Нужно в том случае, если описание решенной проблемы достаточно сложно и не может уместиться в строку заголовка. 

<a name="%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B"></a>
### Примеры


```
    docs(all): дополнено README
```

```
    feature(gui): добавлено отображение картинки

    - Перед созданием приложения добавлено sip.setdestroyonexit(False), 
      чтобы приложение не падало при закрытии (особенность PyQt4)
    - Если нужно показывать картинку, то форма растягивается до 800 пкс
    - В showForm шрифт установлен моноширинный
```

```
    refactor(tests): kpa_self_test - тест переехал на testhandler
```

```
    chore(gui): MainWindow - добавлена машина состояний для кнопок запуска/остановки тестов
```

```
    fix(funlib): Oku - исправлена ошибка фиксации команд только по 1 линии
```

```
    feature(tests): id - переделал тест ИД на 2 полукомплекта
```